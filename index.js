!function(){"use strict";const a=new class{constructor(){this._data={}}get data(){return this._data}set data(a){this._data[a]}};let{data:e}=a;e={canvas:{x:0,y:0},meta:{}};const t=document.querySelector("canvas"),s=t.getContext("2d"),n=document.querySelector("#import-images-icon"),c=document.querySelector("#import-images"),i=document.querySelector("#export-spritesheet");document.addEventListener("DOMContentLoaded",(()=>{t.width=e.canvas.x,t.height=e.canvas.y})),n.addEventListener("click",(()=>{c.click()})),c.addEventListener("change",(()=>{[...c.files].map(((a,n)=>{const c=new Image,i=new FileReader;i.readAsDataURL(a),i.addEventListener("load",(()=>{const a=i.result;c.src=a}));const d=a.name.slice(0,a.name.indexOf("."));e.canvas.images||(e.canvas.images={}),e.canvas.images[d]||(e.canvas.images[d]={}),e.meta[d]||(e.meta[d]={}),c.addEventListener("load",(()=>{e.canvas.images[d].fileName=d,e.canvas.images[d].file=c.src,e.canvas.images[d].width=c.width,e.canvas.images[d].height=c.height,e.canvas.images[d].x=0,e.canvas.images[d].y=t.height+5,e.canvas.x=c.width>e.canvas.x?c.width:e.canvas.x,e.canvas.y+=Math.ceil(c.height+10),e.meta[d].fileName=e.canvas.images[d].fileName,e.meta[d].x=e.canvas.images[d].x,e.meta[d].y=e.canvas.images[d].y,e.meta[d].width=e.canvas.images[d].width,e.meta[d].height=e.canvas.images[d].height,t.width=e.canvas.x,t.height=e.canvas.y;for(let a in e.canvas.images){const{file:t,x:n,y:c}=e.canvas.images[a],i=new Image;i.src=t,s.drawImage(i,n,c)}}))}))})),i.addEventListener("click",(()=>{if(e.canvas.images){let a=document.createElement("a");a.download="spritesheet.png",a.href=t.toDataURL(),a.click();const s=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(e.meta,0,2))}`;a.download="data.json",a.href=s,a.click();const n=`const data = ${JSON.stringify(e.meta,0,2)};\n\nexport default data;`,c=`data:text/javascript;charset=utf-8,${encodeURIComponent(n)}`;a.download="data.js",a.href=c,a.click(),a=null}}))}();
